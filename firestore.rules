rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
		
    // match /{document=**} {
    // 	allow read, write: if true;
    // }
    match /users/filler/{useruid}/stat/pla/{checkplaid} { //probably change later
    	allow read, write
    }
    match /users/filler/{useruid}/mpaps/{path=**} {
    	allow read, write: if uidIsAMatch(useruid) && isSignedIn()
    }


    
    /// Functions ///
    
    function isSignedIn() {
    	return request.auth != null
    }
    
    function uidIsAMatch(uidArg) {
    	return uidArg == request.auth.uid
    }
    
    function isEmailVerified() {
    	return request.auth.token.email_verified
    }
    
    function getPLADOC() {
    	return get(/databases/$(database)/documents/$(request.auth.uid)/stat/pla).data
    }
  }
}